(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();console.log("‚úÖ main.js carregado");const d="https://node-api-gc77.onrender.com";console.log("üåê API em uso:",d);let i=[];async function u(){try{const r=await fetch(`${d}/api/products`);if(!r.ok)throw new Error(`Erro HTTP: ${r.status}`);i=await r.json(),console.log("üì¶ Produtos recebidos:",i),s()}catch(r){console.error("‚ùå Erro ao carregar produtos:",r),document.getElementById("products").innerHTML="<p>Erro ao conectar com o servidor.</p>"}}function s(){const r=document.getElementById("buscar")?.value?.toLowerCase()||"",a=document.getElementById("plataforma")?.value||"Todas as plataformas",t=document.getElementById("categoria")?.value||"Todas as categorias",c=i.filter(e=>{const o=e.name?.toLowerCase().includes(r),n=a==="Todas as plataformas"||e.platform===a,l=t==="Todas as categorias"||e.category===t;return o&&n&&l});m(c)}function m(r){const a=document.getElementById("products");a&&(a.innerHTML=r.length?r.map(t=>`
      <div class="produto-card">
        <img src="${t.image||"https://via.placeholder.com/200"}" alt="${t.name}">
        <h3>${t.name}</h3>
        <p class="preco">${t.currency||"R$"} ${t.price}</p>
        <p class="plataforma">${t.platform} - ${t.region}</p>
        <a href="${t.affiliateLink}" target="_blank" class="btn">Comprar</a>
      </div>
    `).join(""):"<p>Nenhum produto encontrado.</p>")}document.getElementById("buscar")?.addEventListener("input",s);document.getElementById("plataforma")?.addEventListener("change",s);document.getElementById("categoria")?.addEventListener("change",s);u();
